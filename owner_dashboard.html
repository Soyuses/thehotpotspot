<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–∞—à–±–æ—Ä–¥ –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Å–µ—Ç–∏</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 30px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .stat-card h3 {
            color: #333;
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #ff6b6b;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
            overflow-x: auto;
        }

        .tab {
            padding: 20px;
            text-align: center;
            cursor: pointer;
            background: #f8f9fa;
            border: none;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 150px;
        }

        .tab:hover {
            background: #e9ecef;
        }

        .tab.active {
            background: white;
            border-bottom: 3px solid #ff6b6b;
            color: #ff6b6b;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border: 1px solid #dee2e6;
        }

        .card h3 {
            color: #333;
            margin-bottom: 15px;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .alert.critical {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .alert.high {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .alert.medium {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .alert.low {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤ */
        .token-ratio-display {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .ratio-item {
            text-align: center;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e9ecef;
            min-width: 150px;
        }

        .ratio-item h4 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .ratio-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #ff6b6b;
            margin-bottom: 5px;
        }

        .ratio-percentage {
            color: #666;
            font-size: 0.9em;
        }

        .ratio-separator {
            font-size: 2em;
            font-weight: bold;
            color: #333;
        }

        .ratio-info {
            text-align: center;
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .ratio-info p {
            margin: 5px 0;
        }

        .ratio-info strong {
            color: #1976d2;
        }

        .btn {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6c757d, #495057);
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .table th,
        .table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }

        .table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #333;
        }

        .table tr:hover {
            background: #f8f9fa;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #ff6b6b;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            transition: width 0.3s ease;
        }

        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-safe {
            background: #d4edda;
            color: #155724;
        }

        .status-warning {
            background: #fff3cd;
            color: #856404;
        }

        .status-danger {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üëë –î–∞—à–±–æ—Ä–¥ –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Å–µ—Ç–∏</h1>
            <p>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–ª–æ–∫—á–µ–π–Ω —Å–µ—Ç—å—é —Ñ—É–¥—Ç—Ä–∞–∫–æ–≤</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <h3>Security Tokens</h3>
                <div class="stat-value" id="ownerTokens">0.00</div>
            </div>
            <div class="stat-card">
                <h3>Utility Tokens</h3>
                <div class="stat-value" id="ownerUtilityTokens">0.00</div>
            </div>
            <div class="stat-card">
                <h3>–ü—Ä–æ—Ü–µ–Ω—Ç –≤–ª–∞–¥–µ–Ω–∏—è</h3>
                <div class="stat-value" id="ownerPercentage">0.00%</div>
            </div>
            <div class="stat-card">
                <h3>–ê–∫—Ç–∏–≤–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã</h3>
                <div class="stat-value" id="activeAlerts">0</div>
            </div>
            <div class="stat-card">
                <h3>–§—Ä–∞–Ω—à–∏–∑–Ω—ã–µ –Ω–æ–¥—ã</h3>
                <div class="stat-value" id="franchiseNodes">0</div>
            </div>
            <div class="stat-card">
                <h3>–ë–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–æ–Ω–¥</h3>
                <div class="stat-value" id="charityFund">0.00</div>
            </div>
            <div class="stat-card">
                <h3>–ù–µ–≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã</h3>
                <div class="stat-value" id="unclaimedTokens">0.00</div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('monitoring')">–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</button>
            <button class="tab" onclick="showTab('franchises')">–§—Ä–∞–Ω—à–∏–∑—ã</button>
            <button class="tab" onclick="showTab('token-emission')">–≠–º–∏—Å—Å–∏—è —Ç–æ–∫–µ–Ω–æ–≤</button>
            <button class="tab" onclick="showTab('unclaimed')">–ù–µ–≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω—ã–µ</button>
            <button class="tab" onclick="showTab('security')">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</button>
        </div>

        <!-- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ -->
        <div id="monitoring" class="tab-content active">
            <h2>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã</h2>
            
            <div class="grid">
                <div class="card">
                    <h3>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤</h3>
                    <div id="tokenDistribution">
                        <div class="progress-bar">
                            <div class="progress-fill" id="ownerProgress" style="width: 48%"></div>
                        </div>
                        <p>–í–ª–∞–¥–µ–ª–µ—Ü: <span id="ownerTokensPercent">48.00%</span></p>
                        
                        <div class="progress-bar">
                            <div class="progress-fill" id="charityProgress" style="width: 3%; background: #28a745;"></div>
                        </div>
                        <p>–ë–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–æ–Ω–¥: <span id="charityTokensPercent">3.00%</span></p>
                        
                        <div class="progress-bar">
                            <div class="progress-fill" id="othersProgress" style="width: 49%; background: #17a2b8;"></div>
                        </div>
                        <p>–û—Å—Ç–∞–ª—å–Ω—ã–µ: <span id="othersTokensPercent">49.00%</span></p>
                    </div>
                </div>

                <div class="card">
                    <h3>–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤</h3>
                    <div id="tokenRatio">
                        <div class="token-ratio-display">
                            <div class="ratio-item">
                                <h4>Security Tokens</h4>
                                <div class="ratio-value" id="securityTokensCount">1,000,000</div>
                                <div class="ratio-percentage">50%</div>
                            </div>
                            <div class="ratio-separator">:</div>
                            <div class="ratio-item">
                                <h4>Utility Tokens</h4>
                                <div class="ratio-value" id="utilityTokensCount">1,000,000</div>
                                <div class="ratio-percentage">50%</div>
                            </div>
                        </div>
                        <div class="ratio-info">
                            <p><strong>–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ: 1:1</strong></p>
                            <p>–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Security –∏ Utility —Ç–æ–∫–µ–Ω–æ–≤</p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>–ê–∫—Ç–∏–≤–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã</h3>
                    <div id="alertsList">
                        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- –§—Ä–∞–Ω—à–∏–∑—ã -->
        <div id="franchises" class="tab-content">
            <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ—Ä–∞–Ω—à–∏–∑–∞–º–∏</h2>
            
            <div class="grid">
                <div class="card">
                    <h3>–î–æ–±–∞–≤–∏—Ç—å —Ñ—Ä–∞–Ω—à–∏–∑–Ω—É—é –Ω–æ–¥—É</h3>
                    <form id="franchiseForm">
                        <div class="form-group">
                            <label>ID –Ω–æ–¥—ã:</label>
                            <input type="text" id="nodeId" required>
                        </div>
                        <div class="form-group">
                            <label>–ê–¥—Ä–µ—Å –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Ñ—Ä–∞–Ω—à–∏–∑—ã:</label>
                            <input type="text" id="franchiseOwner" required>
                        </div>
                        <button type="submit" class="btn">–î–æ–±–∞–≤–∏—Ç—å —Ñ—Ä–∞–Ω—à–∏–∑—É</button>
                    </form>
                </div>

                <div class="card">
                    <h3>–°–ø–∏—Å–æ–∫ —Ñ—Ä–∞–Ω—à–∏–∑</h3>
                    <div id="franchisesList">
                        <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ—Ä–∞–Ω—à–∏–∑...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- –≠–º–∏—Å—Å–∏—è —Ç–æ–∫–µ–Ω–æ–≤ -->
        <div id="token-emission" class="tab-content">
            <h2>–≠–º–∏—Å—Å–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤</h2>
            
            <div class="card">
                <h3>–í—ã–ø—É—Å–∫ security —Ç–æ–∫–µ–Ω–æ–≤</h3>
                <form id="emissionForm">
                    <div class="form-group">
                        <label>–ê–¥—Ä–µ—Å –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞:</label>
                        <input type="text" id="investorAddress" required>
                    </div>
                    <div class="form-group">
                        <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤:</label>
                        <input type="number" id="tokenAmount" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label>–ü—Ä–∏—á–∏–Ω–∞ —ç–º–∏—Å—Å–∏–∏:</label>
                        <input type="text" id="emissionReason" placeholder="–ü—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ –∫—Ä—É–ø–Ω–æ–≥–æ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞">
                    </div>
                    <button type="submit" class="btn">–í—ã–ø—É—Å—Ç–∏—Ç—å —Ç–æ–∫–µ–Ω—ã</button>
                </form>
            </div>
        </div>

        <!-- –ù–µ–≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã -->
        <div id="unclaimed" class="tab-content">
            <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω—ã–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏</h2>
            
            <div class="grid">
                <div class="card">
                    <h3>–ù–µ–≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã</h3>
                    <div id="unclaimedList">
                        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–µ–≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤...</p>
                    </div>
                    <button class="btn" onclick="distributeUnclaimedTokens()">–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤ –∫–æ–Ω—Ü–µ –≥–æ–¥–∞</button>
                </div>

                <div class="card">
                    <h3>–ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π</h3>
                    <div id="distributionHistory">
                        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å -->
        <div id="security" class="tab-content">
            <h2>–û—Ç—á–µ—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</h2>
            
            <div class="card">
                <h3>–°—Ç–∞—Ç—É—Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–µ—Ç–∏</h3>
                <div id="securityReport">
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç—á–µ—Ç–∞ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏...</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            // –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤–∫–ª–∞–¥–∫–∏
            if (tabName === 'monitoring') {
                loadMonitoringData();
            } else if (tabName === 'franchises') {
                loadFranchises();
            } else if (tabName === 'unclaimed') {
                loadUnclaimedTokens();
            } else if (tabName === 'security') {
                loadSecurityReport();
            }
        }

        function loadMonitoringData() {
            // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
            fetch('http://localhost:3000', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    GetOwnerStats: {}
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.OwnerStats) {
                    updateOwnerStats(data.OwnerStats);
                }
            })
            .catch(error => {
                console.log('API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ');
                loadDemoData();
            });

            // –ó–∞–≥—Ä—É–∑–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤
            loadAlerts();
        }

        function loadDemoData() {
            document.getElementById('ownerTokens').textContent = '2,400.00';
            document.getElementById('ownerPercentage').textContent = '48.00%';
            document.getElementById('activeAlerts').textContent = '3';
            document.getElementById('franchiseNodes').textContent = '6';
            document.getElementById('charityFund').textContent = '150.00';
            document.getElementById('unclaimedTokens').textContent = '245.00';
        }

        function loadAlerts() {
            fetch('http://localhost:3000', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    GetMonitoringAlerts: { limit: 10 }
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.MonitoringAlerts) {
                    displayAlerts(data.MonitoringAlerts.alerts);
                }
            })
            .catch(error => {
                // –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–ª–µ—Ä—Ç–æ–≤
                displayAlerts([
                    {
                        alert_type: 'OwnerExceedsLimit',
                        severity: 'Critical',
                        message: '–í–ª–∞–¥–µ–ª–µ—Ü –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –∫ –ª–∏–º–∏—Ç—É: 47.8%',
                        timestamp: Date.now() - 3600000
                    },
                    {
                        alert_type: 'FranchiseExceedsLimit',
                        severity: 'High',
                        message: '–í–ª–∞–¥–µ–ª–µ—Ü —Ñ—Ä–∞–Ω—à–∏–∑—ã FranchiseOwner1 –ø—Ä–µ–≤—ã—Å–∏–ª –ª–∏–º–∏—Ç: 49.2%',
                        timestamp: Date.now() - 7200000
                    },
                    {
                        alert_type: 'TokenConcentration',
                        severity: 'Medium',
                        message: '–í—ã—Å–æ–∫–∞—è –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è utility —Ç–æ–∫–µ–Ω–æ–≤ —É Customer123: 35.2%',
                        timestamp: Date.now() - 10800000
                    }
                ]);
            });
        }

        function displayAlerts(alerts) {
            const alertsList = document.getElementById('alertsList');
            let html = '';

            alerts.forEach(alert => {
                const severityClass = alert.severity.toLowerCase();
                const timeAgo = new Date(alert.timestamp).toLocaleString();
                
                html += `
                    <div class="alert ${severityClass}">
                        <strong>${getAlertTypeText(alert.alert_type)}</strong><br>
                        ${alert.message}<br>
                        <small>${timeAgo}</small>
                    </div>
                `;
            });

            alertsList.innerHTML = html || '<p>–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–ª–µ—Ä—Ç–æ–≤</p>';
        }

        function getAlertTypeText(alertType) {
            const types = {
                'OwnerExceedsLimit': '–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞',
                'FranchiseExceedsLimit': '–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ —Ñ—Ä–∞–Ω—à–∏–∑—ã',
                'CustomerExceedsLimit': '–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è',
                'TokenConcentration': '–ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤',
                'CharityFundLow': '–ù–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å —Ñ–æ–Ω–¥–∞'
            };
            return types[alertType] || alertType;
        }

        function loadFranchises() {
            // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Ñ—Ä–∞–Ω—à–∏–∑
            fetch('http://localhost:3000', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    GetFranchiseNodes: {}
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.FranchiseNodes) {
                    displayFranchises(data.FranchiseNodes.nodes);
                }
            })
            .catch(error => {
                // –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ
                displayFranchises([
                    { node_id: 'FranchiseNode1', owner: 'FranchiseOwner1' },
                    { node_id: 'FranchiseNode2', owner: 'FranchiseOwner2' },
                    { node_id: 'FranchiseNode3', owner: 'FranchiseOwner3' }
                ]);
            });
        }

        function displayFranchises(franchises) {
            const franchisesList = document.getElementById('franchisesList');
            let html = '';

            franchises.forEach(franchise => {
                html += `
                    <div class="card" style="margin-bottom: 10px;">
                        <h4>${franchise.node_id}</h4>
                        <p>–í–ª–∞–¥–µ–ª–µ—Ü: ${franchise.owner}</p>
                        <button class="btn btn-secondary" onclick="removeFranchise('${franchise.node_id}')">–£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                `;
            });

            franchisesList.innerHTML = html || '<p>–ù–µ—Ç —Ñ—Ä–∞–Ω—à–∏–∑–Ω—ã—Ö –Ω–æ–¥</p>';
        }

        function loadUnclaimedTokens() {
            // –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–µ–≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤
            fetch('http://localhost:3000', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    GetUnclaimedTokens: { limit: 50 }
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.UnclaimedTokens) {
                    displayUnclaimedTokens(data.UnclaimedTokens.tokens);
                }
            })
            .catch(error => {
                // –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ
                displayUnclaimedTokens([
                    { check_id: 'CHECK_123', amount: 49.0, created_timestamp: Date.now() - 86400000 },
                    { check_id: 'CHECK_124', amount: 98.0, created_timestamp: Date.now() - 172800000 }
                ]);
            });

            // –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
            loadDistributionHistory();
        }

        function displayUnclaimedTokens(tokens) {
            const unclaimedList = document.getElementById('unclaimedList');
            let html = '';

            tokens.forEach(token => {
                const timeAgo = new Date(token.created_timestamp).toLocaleString();
                html += `
                    <div class="alert medium">
                        <strong>–ß–µ–∫ ${token.check_id}</strong><br>
                        –°—É–º–º–∞: ${token.amount} —Ç–æ–∫–µ–Ω–æ–≤<br>
                        <small>–°–æ–∑–¥–∞–Ω: ${timeAgo}</small>
                    </div>
                `;
            });

            unclaimedList.innerHTML = html || '<p>–ù–µ—Ç –Ω–µ–≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤</p>';
        }

        function loadDistributionHistory() {
            fetch('http://localhost:3000', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    GetAnnualDistributions: { limit: 10 }
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.AnnualDistributions) {
                    displayDistributionHistory(data.AnnualDistributions.distributions);
                }
            })
            .catch(error => {
                // –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ
                displayDistributionHistory([
                    { year: 2024, total_unclaimed_tokens: 245.0, distribution_timestamp: Date.now() - 86400000 }
                ]);
            });
        }

        function displayDistributionHistory(distributions) {
            const historyDiv = document.getElementById('distributionHistory');
            let html = '';

            distributions.forEach(dist => {
                const timeAgo = new Date(dist.distribution_timestamp).toLocaleString();
                html += `
                    <div class="alert low">
                        <strong>–ì–æ–¥ ${dist.year}</strong><br>
                        –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–æ: ${dist.total_unclaimed_tokens} —Ç–æ–∫–µ–Ω–æ–≤<br>
                        <small>${timeAgo}</small>
                    </div>
                `;
            });

            historyDiv.innerHTML = html || '<p>–ù–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π</p>';
        }

        function loadSecurityReport() {
            fetch('http://localhost:3000', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    GetNetworkSecurityReport: {}
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.NetworkSecurityReport) {
                    displaySecurityReport(data.NetworkSecurityReport);
                }
            })
            .catch(error => {
                // –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ
                displaySecurityReport({
                    is_secure: true,
                    total_security_tokens: 5000.0,
                    total_utility_tokens: 1000.0,
                    security_risks: [],
                    utility_risks: []
                });
            });
        }

        function displaySecurityReport(report) {
            const reportDiv = document.getElementById('securityReport');
            const statusClass = report.is_secure ? 'status-safe' : 'status-danger';
            const statusText = report.is_secure ? '–ë–ï–ó–û–ü–ê–°–ù–û' : '–û–ü–ê–°–ù–û';

            let html = `
                <div class="status-badge ${statusClass}">${statusText}</div>
                <p><strong>–û–±—â–∏–µ security —Ç–æ–∫–µ–Ω—ã:</strong> ${report.total_security_tokens.toFixed(2)}</p>
                <p><strong>–û–±—â–∏–µ utility —Ç–æ–∫–µ–Ω—ã:</strong> ${report.total_utility_tokens.toFixed(2)}</p>
            `;

            if (report.security_risks && report.security_risks.length > 0) {
                html += '<h4>–†–∏—Å–∫–∏ security —Ç–æ–∫–µ–Ω–æ–≤:</h4>';
                report.security_risks.forEach(risk => {
                    html += `<div class="alert high">${risk.address}: ${risk.percentage.toFixed(2)}%</div>`;
                });
            }

            if (report.utility_risks && report.utility_risks.length > 0) {
                html += '<h4>–†–∏—Å–∫–∏ utility —Ç–æ–∫–µ–Ω–æ–≤:</h4>';
                report.utility_risks.forEach(risk => {
                    html += `<div class="alert high">${risk.address}: ${risk.percentage.toFixed(2)}%</div>`;
                });
            }

            reportDiv.innerHTML = html;
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ñ–æ—Ä–º
        document.getElementById('franchiseForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const nodeId = document.getElementById('nodeId').value;
            const franchiseOwner = document.getElementById('franchiseOwner').value;

            fetch('http://localhost:3000', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    AddFranchiseNode: {
                        node_id: nodeId,
                        franchise_owner: franchiseOwner
                    }
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.FranchiseNodeAdded && data.FranchiseNodeAdded.success) {
                    showAlert('–§—Ä–∞–Ω—à–∏–∑–Ω–∞—è –Ω–æ–¥–∞ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞!', 'success');
                    document.getElementById('franchiseForm').reset();
                    loadFranchises();
                } else {
                    showAlert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ñ—Ä–∞–Ω—à–∏–∑—ã: ' + (data.Error ? data.Error.message : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'), 'error');
                }
            })
            .catch(error => {
                showAlert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º', 'error');
            });
        });

        document.getElementById('emissionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const investorAddress = document.getElementById('investorAddress').value;
            const tokenAmount = parseFloat(document.getElementById('tokenAmount').value);
            const reason = document.getElementById('emissionReason').value;

            fetch('http://localhost:3000', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    EmitTokensForInvestors: {
                        investor_address: investorAddress,
                        amount: tokenAmount,
                        reason: reason
                    }
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.TokensEmitted && data.TokensEmitted.success) {
                    showAlert('–¢–æ–∫–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ –≤—ã–ø—É—â–µ–Ω—ã –¥–ª—è –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞!', 'success');
                    document.getElementById('emissionForm').reset();
                } else {
                    showAlert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —ç–º–∏—Å—Å–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤: ' + (data.Error ? data.Error.message : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'), 'error');
                }
            })
            .catch(error => {
                showAlert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º', 'error');
            });
        });

        function distributeUnclaimedTokens() {
            fetch('http://localhost:3000', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    DistributeUnclaimedTokensAnnually: {}
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.AnnualDistribution && data.AnnualDistribution.success) {
                    showAlert('–ù–µ–≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã!', 'success');
                    loadUnclaimedTokens();
                } else {
                    showAlert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏: ' + (data.Error ? data.Error.message : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'), 'error');
                }
            })
            .catch(error => {
                showAlert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º', 'error');
            });
        }

        function showAlert(message, type) {
            const alert = document.createElement('div');
            alert.className = `alert ${type}`;
            alert.textContent = message;
            
            const container = document.querySelector('.tab-content.active');
            container.insertBefore(alert, container.firstChild);
            
            setTimeout(() => {
                alert.remove();
            }, 5000);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            loadMonitoringData();
        });
    </script>
</body>
</html>
